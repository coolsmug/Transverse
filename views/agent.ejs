
<%- include ('./dash_include/header.ejs') %>
<%- include ('./dash_include/dashboard_all.ejs') %>


<div class="main-container">
    <nav class="headering">
        <div class="head_in">
            <P>Agent Table</P>
         <ol>
            <li> 
                <a href="">
                    Home >
                </a>
            </li>
            <li> 
                <span>
                    Agent List
                </span>
            </li>
        </ol>
        </div>
        <a href="/admin/createagent" class="created">Add Agent</a>
    </nav>
    <div class="table_admin">
        <div class="d-name-tag">
            <p>Staff Table Lists</p>
        </div>
        <table >
            <thead>
                <tr>
                    <th><i class="bi bi-chevron-down not_nowstaff"></i> S/N</th>
                    <th>Image</th>
                    <th>Full Name</th>
                    <th>Performance</th>
                    <th>Email</th>
                    <th>Mobile</th> 
                    <th>Status</th>
                    <th class="actionstaff">Action</th>
                </tr>
            </thead>
            <tbody>
                <% let count = 1; %>
                <% staff.forEach(function(staff){ %>
                    <tr>
                        <td class="numberings"><%= count %></td>
                        <td><div class="imageadmin"><img src="<%= staff.img.url %>""  alt="" width="50"</div></td>
                        <td><%= staff.first_name %> <%= staff.second_name %></td>
                        <td><%= staff.performance %></td>
                        <td><%= staff.email %></td>
                        <td><a href="tel:<%= staff.phone %>"><%= staff.phone %></a></td>
                        <td><label class="agent_swith switch">
                            <input type="checkbox"  data-user-id="<%= staff._id %>" <%= staff.status == true ? 'checked' : '' %> >
                            <span class="slider">
                            </span>
                            </label>
                        </td>
                        <td class="option_hidden_staff">
                            <div class="hidden">
                                <button class="delete"><a href="/admin/delete-agent/<%= staff._id %>"  class="delete_agent" data-id="<%= staff._id %>"> <i class="fas fa-trash"></i></a></button>
                                <button class="view"><a href="/admin/agent-detail/?id=<%= staff._id %>"><i class="fas fa-eye"></i></a></button>
                                <button class="edit"><a href="/admin/edit-agent?id=<%= staff._id %>"><i class="fas fa-user-edit"></i></a></button>
                            </div>
                        </td>
                    </tr>
                    <% count++ %>
                <% }) %>

            </tbody>
        </table>
        
        <ul class="paginationa">
            <% if (current > 1) { %>
              <li><a href="/admin/agent/<%= parseInt(current) - 1 %>">&laquo;</a></li>
            <% } %>
          
            <% for (var i = 1; i <= pages; i++) { %>
              <% if (current == i) { %>
                <li class="active"><a href="/admin/agent/<%= i %>"><%= i %></a></li>
              <% } else { %>
                <li><a href="/admin/agent/<%= i %>"><%= i %></a></li>
              <% } %>
            <% } %>
          
            <% if (current < pages) { %>
              <li><a href="/admin/agent/<%= parseInt(current) + 1 %>">&raquo;</a></li>
            <% } %>
        </ul>
       
    </div>
    <div class="footering">
        <h3>All rights reserved and Powered by: Transverse Real Estate Solution<i class="fas fa-copyright"></i> 2023</h3>
    </div>
</div>

<%- include ('./dash_include/footer.ejs') %>

<script>

    const hide = document.querySelector('.hidden');

    hide.forEach(function(hid) {
        hid.style.position = "absolute";
    });
    
</script>
  